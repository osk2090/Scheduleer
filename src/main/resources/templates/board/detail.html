<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Detail</title>
</head>
<body>
    <input type="hidden" name="id" th:value="${boardDetail.id}">
    <input type="text" name="title" th:value="${boardDetail.title}" disabled>
    <input type="text" name="writer.name" th:value="${boardDetail.writer.name}" disabled>

    <img id="image" src=""/>
    <input type="text" id="check" name="checkStar" th:value="${boardDetail.checkStar}" hidden><br>

    작성일자 : <input type="text" name="writer.name" th:value="${boardDetail.regDate}" disabled>
    계획 달성 일자: <input type="text" name="writer.name" th:value="${boardDetail.updateDate}" disabled><br>

    <div sec:authorize="isFullyAuthenticated()">
<!--        현재 여기서 구글로그인을 하면 여기서 이메일을 못가져와서 에러가 난다.
아마 백엔드에서 로그인된 정보를 넘겨줘야할 것같다.-->
    <div th:if="${#authentication.principal.email} == ${boardDetail.writer.email}" class="nav-item">
        <a th:href="@{/board/update/{id}(id=${boardDetail.id})}">
            <button>수정</button>
        </a>
    </div>
    </div>

    <button type="button" class="navyBtn" onclick="location.href='/main'">이전으로</button>
</body>
</html>

<script type="text/javascript">
    state = document.getElementById('check').value;
    if (state === 'false') {
        document.getElementById('image').src = '/image/unchecked.svg';
    } else {
        document.getElementById('image').src = '/image/checked.svg';
    }
</script>